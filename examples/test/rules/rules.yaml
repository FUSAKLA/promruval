groups:
  - name: adsfasdfasdfasdf
    rules:
      - record: test:email:testy
        labels:
          test: asdfasdf
          email: asdfasdf
          testy: asdfasdf
        expr: 1

  - name: PodTooManyRestartsGeneric
    rules:
      - alert: PodTooManyRestarts
        expr: |
          (sum(increase(kube_pod_container_status_restarts_total{test=~"asdfasdf"}[15m])) by (namespace, pod, test) > 1 )  * on (test) group_left(email, testy) test:email:testy
        for: 1m
        labels:
          severity: standard
        annotations:
          alertci: PodTooManyRestarts
          description: Too many restarts in pod {{ $labels.pod }} in namespace {{ $labels.namespace }}.
          email: "{{ $labels.email }}"
          summary: Pods had several restarts within 15 minutes.
          disabled_validation_rules: check-test-label, check-testy-label